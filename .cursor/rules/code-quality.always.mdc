# Code Quality and Consolidation - Always Apply

## 🎯 **Scope and Purpose**

This rule enforces code consolidation practices, naming convention preservation, and quality standards for MagicOptimizer development.

## 🔄 **Code Consolidation Process**

### **Before Removing Duplicate Code**
- **NEVER remove** duplicate code without thorough analysis
- **Always compare** files and code before consolidation
- **Make informed decisions** about what to keep
- **Preserve valuable** old code that may have purpose
- **Document consolidation** decisions in development log

### **Consolidation Analysis Steps**
1. **Compare duplicate files** line by line
2. **Identify differences** and unique features
3. **Assess value** of each version
4. **Determine which version** to preserve
5. **Plan consolidation** strategy
6. **Document decision** and reasoning

### **Value Assessment Criteria**
- **Functionality**: Does each version serve different purposes?
- **Performance**: Are there performance differences?
- **Maintenance**: Which version is easier to maintain?
- **Compatibility**: Are there dependency differences?
- **Testing**: Which version has better test coverage?

## 📝 **Naming Convention Preservation**

### **Core Principle**
- **Existing code style takes precedence** over new conventions
- **Follow established patterns** in the codebase
- **Preserve working behavior** and module boundaries
- **Maintain consistency** with existing code

### **Naming Convention Rules**
- **Function names**: Follow existing patterns (PascalCase, camelCase)
- **Variable names**: Match existing style in the same file
- **Class names**: Use established naming patterns
- **File names**: Follow existing file naming conventions
- **Namespace names**: Maintain existing namespace structure

### **Style Consistency**
- **Indentation**: Match existing file style
- **Bracing**: Follow existing bracing style
- **Spacing**: Use consistent spacing patterns
- **Comments**: Follow existing comment style
- **Documentation**: Match existing documentation format

## 🚫 **Consolidation Anti-Patterns**

### **What NOT to Do**
- ❌ **Don't blindly delete** duplicate code without analysis
- ❌ **Don't assume newer** code is always better
- ❌ **Don't ignore context** and usage patterns
- ❌ **Don't break existing** functionality during consolidation
- ❌ **Don't lose valuable** features from older versions

### **What to ALWAYS Do**
- ✅ **Analyze thoroughly** before consolidation
- ✅ **Preserve valuable** functionality from all versions
- ✅ **Document consolidation** decisions
- ✅ **Test thoroughly** after consolidation
- ✅ **Maintain backward** compatibility

## 🔍 **Code Analysis Process**

### **Duplicate Detection**
- **Use tools** to identify duplicate code
- **Manual review** of suspected duplicates
- **Pattern analysis** for similar functionality
- **Dependency mapping** for related code

### **Impact Assessment**
- **Identify affected** components and modules
- **Assess risk** of consolidation
- **Plan testing** strategy
- **Prepare rollback** plan if needed

## 📊 **Consolidation Quality Metrics**

### **Success Indicators**
- ✅ **No functionality lost** during consolidation
- ✅ **Code quality improved** through consolidation
- ✅ **Maintenance burden reduced** without breaking changes
- ✅ **Consistency improved** across codebase
- ✅ **Documentation updated** to reflect changes

### **Risk Mitigation**
- **Thorough testing** after consolidation
- **Incremental consolidation** for complex changes
- **Team review** of consolidation decisions
- **Backup and version control** for all changes
- **Rollback procedures** if issues arise

## 🎯 **Success Metrics**

- ✅ **All duplicate code** properly analyzed before removal
- ✅ **Valuable functionality** preserved during consolidation
- ✅ **Naming conventions** maintained consistently
- ✅ **Code quality improved** through consolidation
- ✅ **No regressions** introduced during consolidation
- ✅ **Consolidation decisions** properly documented

## 🔧 **Implementation Guidelines**

### **Consolidation Workflow**
1. **Identify duplicates** using appropriate tools
2. **Analyze each version** for unique value
3. **Plan consolidation** strategy
4. **Implement changes** incrementally
5. **Test thoroughly** after each change
6. **Document results** and decisions

### **Quality Assurance**
- **Code review** for all consolidation changes
- **Automated testing** to verify functionality
- **Manual testing** of affected features
- **Performance testing** if applicable
- **Documentation updates** to reflect changes

description: Code quality rules that enforce consolidation practices, naming convention preservation, and quality standards for MagicOptimizer development.
globs: ["**/*.cpp", "**/*.h", "**/*.py", "**/*.cs"]
alwaysApply: true
---
